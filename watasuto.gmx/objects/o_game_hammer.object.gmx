<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize();

catch = 0;
catch_wrong = 0;

moles = ds_list_create();

for(var i=0; i&lt;9; i++){
    var mole = ds_map_create();
    ds_map_add(mole, "life", 0);
    ds_map_add(mole, "chatched", false);
    ds_map_add(mole, "icon", 1);
    ds_map_add(mole, "bad", true);
    ds_list_add(moles, mole);
}
mole_regen_delay_var = 0.5;
mole_regen_delay = 75;
mole_regen = 0;
mole_life = 3600;
mole_bad_ratio = 100;
mole_bad_ratio_adjust = 0;
mole_bad_ratio_adjust_max = 0;

mole_width = 153;
mole_height = 157;

left = 8;
top = 50;

mx = left + 425;
my = top + 100;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// moles life cycle

if (mole_regen &gt; 0)
    mole_regen--;
else {
    mole_regen = mole_regen_delay+irandom_range(-mole_regen_delay*mole_regen_delay_var,mole_regen_delay*mole_regen_delay_var);
    
    var empty_list = ds_list_create();
    for(var i=0; i&lt;9; i++){
        var mole = moles[| i];
        if (mole[? "life"] == 0)
            ds_list_add(empty_list, mole);
    }
    if !ds_list_empty(empty_list){
        var selected = empty_list[| irandom(ds_list_size(empty_list) - 1)];
    
        // 새 채팅 생성
        selected[? "life"] = mole_life;
        selected[? "checked"] = false;
        
        if !(irandom(99) &lt; mole_bad_ratio+mole_bad_ratio_adjust){
            if (mole_bad_ratio_adjust_max &gt; 0)
                mole_bad_ratio_adjust +=  (100-mole_bad_ratio) / (100/mole_bad_ratio*mole_bad_ratio_adjust_max);
            selected[? "bad"] = false;
            selected[? "icon"] = irandom_range(1,2);
        }else {
            mole_bad_ratio_adjust = 0;
            selected[? "bad"] = true;
            selected[? "icon"] = 0;
        }
    }
    
    ds_list_destroy(empty_list);
}


for(var i=0; i&lt;9; i++){
    var mole = moles[| i];
    if (mole[? "life"] &gt; 0)
        mole[? "life"]--;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// mouse action

var click = device_mouse_check_button_pressed(0,mb_left);
var _mouse_x = device_mouse_x(0);
var _mouse_y = device_mouse_y(0);

for(var i=0; i&lt;9; i++){
    var mole = moles[| i];
    
    if (click &amp;&amp; point_in_circle(_mouse_x, _mouse_y, mx + mole_width*(i mod 3) + 55, my + mole_height*floor(i / 3) + 55, 55)) {
        if (mole[? "life"] &gt; 0 &amp;&amp; !mole[? "checked"]){
            
            mole[? "life"] = 15;
            mole[? "checked"] = true;
        }
    }
}

var up = mouse_wheel_up() | 0;
var down = mouse_wheel_down() | 0;

if point_in_rectangle(_mouse_x, _mouse_y, 23, room_height-28-24*4-22, 23+22, room_height-28-24*4){
    mole_regen_delay += (up-down) * 5;
}
if point_in_rectangle(_mouse_x, _mouse_y, 23, room_height-28-24*3-22, 23+22, room_height-28-24*3) {
    mole_regen_delay_var += (up-down) * 0.1;
}
if point_in_rectangle(_mouse_x, _mouse_y, 23, room_height-28-24*2-22, 23+22, room_height-28-24*2) {
    mole_life += (up-down) * 5;
}
if point_in_rectangle(_mouse_x, _mouse_y, 23, room_height-28-24*1-22, 23+22, room_height-28-24*1) {
    mole_bad_ratio += (up-down) * 5;
}
if point_in_rectangle(_mouse_x, _mouse_y, 23, room_height-28-24*0-22, 23+22, room_height-28-24*0) {
    mole_bad_ratio_adjust_max += (up-down);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>background_hspeed[0] = -0.2;
background_vspeed[0] = 0.2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// draw background

draw_set_alpha(1);

draw_sprite(spr_hammer_background, 0, left, top);

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// test draw
draw_set_valign(fa_top)
draw_set_font(f_nanumgothic);
draw_set_color(c_gray);
draw_set_alpha(1);
draw_text(25, 25, "잡은 악플러 : "+string(catch)+"
잘못 잡은 시청자 : "+string(catch_wrong));

draw_set_valign(fa_bottom)
draw_text(45, room_height-25, "생성간격 : "+string(mole_regen_delay/room_speed)+"초
생성간격 변화범위 : "+string(floor(mole_regen_delay_var*100))+"%
유지시간 : "+string(mole_life/room_speed)+"초
악플 확률 : "+string(mole_bad_ratio)+"%
악플 확률 보정 최대 횟수 : (100÷악플 확률×"+string(mole_bad_ratio_adjust_max)+") ("+string(100/mole_bad_ratio*mole_bad_ratio_adjust_max)+"회)");

for(var i=0; i&lt;5; i++){
    draw_set_color(c_dkgray)
    draw_rectangle(23, room_height-28-24*i, 23+22, room_height-28-24*i-22,1)
    if point_in_rectangle(device_mouse_x(0), device_mouse_y(0), 23, room_height-28-24*i-22, 23+22, room_height-28-24*i) {
        draw_set_color(c_gray)
        draw_rectangle(23+4, room_height-28-24*i-4, 23+22-4, room_height-28-24*i-22+4,0)
        draw_circle(device_mouse_x(0), device_mouse_y(0), 17, 1);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// draw moles

var _mouse_x = device_mouse_x(0);
var _mouse_y = device_mouse_y(0);



for(var i=0; i&lt;9; i++){
    var mole = moles[| i];
    
    if (mole[? "life"] &gt; 0){
        
        if (mole[? "checked"]) draw_set_alpha(0.4);
        else draw_set_alpha(1);

        draw_sprite(spr_hammer_enemy, mole[? "icon"], mx + mole_width*(i mod 3), my + mole_height*floor(i / 3));
    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
